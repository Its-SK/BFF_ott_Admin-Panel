<!DOCTYPE html>
<html>
<head>
    <title>Video Admin Panel</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background: #f4f4f4; }
        div { padding: 15px; background: #fff; border-radius: 8px; margin-bottom: 15px; }
        input, select, button { display: block; width: 300px; padding: 8px; margin-bottom: 10px; }
        h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; }
    </style>
</head>
<body>

    <div>
        <h2>1. Login</h2>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <p id="login-status">Status: Logged Out</p>
    </div>

    <div>
        <h2>2. Add New Video (Login First)</h2>
        <input type="text" id="title" placeholder="Video Title">
        <input type="text" id="description" placeholder="Video Description">
        <input type="text" id="video-id" placeholder="YouTube Video ID (e.g., dQw4w9WgXcQ)">
        
        <!-- NEW: Category Dropdown -->
        <label for="category">Select Category:</label>
        <select id="category">
            <option value="">--Select--</option>
            <option value="Movies">Movies</option>
            <option value="Songs">Songs</option>
            <option value="Vlogs">Vlogs</option>
        </select>
        
        <button onclick="addVideo()">Add Video</button>
        <p id="upload-status"></p>
    </div>

    <!-- Import Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script>
        // --- PASTE YOUR FIREBASE CONFIG OBJECT HERE ---
        const firebaseConfig = {
          apiKey: "...",
          authDomain: "...",
          projectId: "...",
          // ...
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        const loginStatus = document.getElementById('login-status');
        const uploadStatus = document.getElementById('upload-status');

        function login() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            auth.signInWithEmailAndPassword(email, pass)
                .then((userCredential) => {
                    loginStatus.innerText = 'Status: Logged in as ' + userCredential.user.email;
                    loginStatus.style.color = 'green';
                })
                .catch((error) => {
                    loginStatus.innerText = 'Error: ' + error.message;
                    loginStatus.style.color = 'red';
                });
        }

        function addVideo() {
            if (!auth.currentUser) {
                uploadStatus.innerText = 'Error: You must be logged in.';
                return;
            }

            const title = document.getElementById('title').value;
            const desc = document.getElementById('description').value;
            const videoId = document.getElementById('video-id').value;
            // NEW: Get category from dropdown
            const category = document.getElementById('category').value;

            // NEW: Updated check
            if (!title || !desc || !videoId || !category) {
                uploadStatus.innerText = 'Error: Please fill all fields, including category.';
                uploadStatus.style.color = 'red';
                return;
            }

            const thumbnailUrl = 'https://i.ytimg.com/vi/' + videoId + '/hqdefault.jpg';
            uploadStatus.innerText = 'Adding video to database...';

            db.collection('videos').add({
                title: title,
                description: desc,
                youtubeVideoId: videoId,
                thumbnailUrl: thumbnailUrl,
                category: category  // NEW: Save the category
            })
            .then((docRef) => {
                uploadStatus.innerText = 'Success! Video added to "' + category + '" section.';
                uploadStatus.style.color = 'green';
                document.getElementById('title').value = '';
                document.getElementById('description').value = '';
                document.getElementById('video-id').value = '';
                document.getElementById('category').value = '';
            })
            .catch((error) => {
                uploadStatus.innerText = 'Error: ' + error.message;
                uploadStatus.style.color = 'red';
            });
        }
    </script>
</body>
</html>
